<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>apiary</title>
</head>
<body>
  <script src="https://api.apiary.io/seeds/embed.js"></script>
  <script>
    var embed = new Apiary.Embed({
      apiBlueprint: "FORMAT: 1A\n\n# Matthiola\n\nThe API doc of [Matthiola](https://github.com/project-matthiola), a distributed commodities OTC electronic trading system.\n\n## Authentication\n\nJSON Web Token\n\n# Group Private\n\nAll actions in group **Private** except `POST /auth` require the `token`.\n\n## Authentication [/auth]\n\n### Sign a Contract [POST]\n\nSign a contract with the broker.\n\n+ Request (application/json)\n\n    + Attributes (object)\n        \n        + firm_name: Matthiola (string)\n    \n    + Headers\n            \n            Accept: application/json\n    \n    + Body\n\n            {\n                \"firm_name\": \"Matthiola\"\n            }\n\n+ Response 201 (application/json)\n\n    + Attributes (object)\n    \n        + data (object)\n            + firm_id: 1 (number)\n            + firm_name: Matthiola (string)\n            + credit: 100 (number)\n            + token (string)\n    \n    + Body\n    \n            { \n                \"data\": {\n                    \"firm_id\": 1,\n                    \"firm_name\": \"Matthiola\",\n                    \"credit\": 100,\n                    \"token\": \"QWxhZGRpbjpvcGVuIHNlc2FtZQ==\"\n                }\n            }\n\n+ Response 409 (application/json)\n\n        {\n            \"error\": {\n                \"status\": 409,\n                \"title\": \"Conflict\",\n                \"message\": \"Invalid firm name.\"\n            }\n        }\n\n### Validate [GET]\n\nValidate the token generated by the broker.\n\n+ Request\n\n    + Headers\n    \n            Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==\n\n+ Response 200 (application/json)\n\n    + Attributes (object)\n    \n        + data (object)\n            + firm_id: 1 (number)\n            + firm_name: Matthiola (string)\n            + credit: 100 (number)\n            + token (string)\n    \n    + Body\n    \n            { \n                \"data\": {\n                    \"firm_id\": 1,\n                    \"firm_name\": \"Matthiola\",\n                    \"credit\": 100,\n                    \"token\": \"QWxhZGRpbjpvcGVuIHNlc2FtZQ==\"\n                }\n            }\n\n+ Response 401 (application/json)\n\n        {\n            \"error\": {\n                \"status\": 401,\n                \"title\": \"Unauthorized\",\n                \"message\": \"Invalid token.\"\n            }\n        }\n\n## Order Collection [/orders{?status,futures_id}]\n\n+ Attributes (array[Order])\n\n+ Parameters\n\n    + status (string, optional) - open | canceled | done | all\n        + default: all\n    + futures_id (string, optional)\n        + default: null\n\n### List Orders [GET]\n\nList your current open orders.\n\n+ Request\n\n    + Headers\n    \n            Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==\n\n+ Response 200 (application/json)\n\n    + Attributes (object)\n    \n        + data (Order Collection)\n\n    + Body\n    \n            { \n                \"data\": [{\n                    \"order_id\": \"D4CA73A0-FE34-4B09-991F-E889813B1C15\",\n                    \"order_type\": \"limit\",\n                    \"side\": \"buy\",\n                    \"futures_id\": \"GC_SEP18\",\n                    \"trader_name\": \"John\",\n                    \"quantity\": 50,\n                    \"open_quantity\": 40,\n                    \"price\": 30.12,\n                    \"status\": \"open\",\n                    \"created_at\": \"2018-05-17T12:00:00Z\",\n                    \"updated_at\": \"2012-05-17T13:00:00Z\"\n                }]\n            }\n\n+ Response 401 (application/json)\n\n        {\n            \"error\": {\n                \"status\": 401,\n                \"title\": \"Unauthorized\",\n                \"message\": \"Invalid token.\"\n            }\n        }\n\n+ Response 404 (application/json)\n\n        {\n            \"error\": {\n                \"status\": 404,\n                \"title\": \"Not Found\",\n                \"message\": \"Invalid futures id.\"\n            }\n        }\n\n## Order [/orders/{order_id}]\n\n+ Attributes (object)\n    + order_id (string, required)\n    + order_type: market | limit | stop (string, required)\n    + side: buy | sell (string, required)\n    + futures_id (string, required)\n    + trader_name: John (string, required)\n    + quantity: 50 (number, required)\n    + open_quantity: 40 (number, required)\n    + price: 30.12 (number, optional)\n    + status: open | canceled | done (string, required)\n    + created_at (string, required)\n    + updated_at (string, optional)\n\n+ Parameters\n\n    + order_id (UUID) - The UUID of the order.\n\n### Get an Order [GET]\n\nGet a single order by order id.\n\n+ Request\n\n    + Headers\n    \n            Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==\n\n+ Response 200 (application/json)\n    \n    + Attributes (object)\n    \n        + data (Order)\n    \n    + Body\n    \n            { \n                \"data\": {\n                    \"order_id\": \"D4CA73A0-FE34-4B09-991F-E889813B1C15\",\n                    \"order_type\": \"limit\",\n                    \"side\": \"buy\",\n                    \"futures_id\": \"GC_SEP18\",\n                    \"trader_name\": \"John\",\n                    \"quantity\": 50,\n                    \"open_quantity\": 40,\n                    \"price\": 30.12,\n                    \"status\": \"open\",\n                    \"created_at\": \"2018-05-17T12:00:00Z\",\n                    \"updated_at\": \"2012-05-17T13:00:00Z\"\n                }\n            }\n\n+ Response 401 (application/json)\n\n        {\n            \"error\": {\n                \"status\": 401,\n                \"title\": \"Unauthorized\",\n                \"message\": \"Invalid token.\"\n            }\n        }\n\n+ Response 404 (application/json)\n\n        {\n            \"error\": {\n                \"status\": 404,\n                \"title\": \"Not Found\",\n                \"message\": \"Invalid order id.\"\n            }\n        }\n\n### Cancel an Order [DELETE]\n\nCancel a single order by order id.\n\n+ Request\n\n    + Headers\n    \n            Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==\n\n+ Response 204\n\n+ Response 401 (application/json)\n\n        {\n            \"error\": {\n                \"status\": 401,\n                \"title\": \"Unauthorized\",\n                \"message\": \"Invalid token.\"\n            }\n        }\n\n+ Response 404 (application/json)\n\n        {\n            \"error\": {\n                \"status\": 404,\n                \"title\": \"Not Found\",\n                \"message\": \"Invalid order id.\"\n            }\n        }\n\n## Trades [/trades{?self_only,futures_id}]\n\n+ Attributes (object)\n    + trade_id (string)\n    + quantity: 50 (number)\n    + price: 30.12 (number)\n    + futures_id (string)\n    + initiator (object)\n        + firm (string)\n        + side (string)\n        + trader (string)\n    + completion (object)\n        + firm (string)\n        + side (string)\n        + trader (string)\n    + trade_time (string)\n\n+ Parameters\n\n    + self_only (boolean, optional) \n        + default: false\n    + futures_id (string, optional)\n        + default: null\n\n### Get Trades [GET]\n\nList the latest trades for futures.\n\n+ Request\n\n    + Headers\n    \n            Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==\n\n+ Response 200 (application/json)\n\n    + Attributes (object)\n        \n        + data (array[Trades])\n    \n    + Body\n    \n            { \n                \"data\": [{\n                    \"trade_id\": \"E271129A-D050-4D05-AFEA-5FB630CDF895\",\n                    \"quantity\": 50,\n                    \"price\": 30.12,\n                    \"futures_id\": \"GC_SEP18\",\n                    \"initiator\": {\n                        \"firm\": \"A\",\n                        \"side\": \"buy\",\n                        \"trader\": \"John\"\n                    },\n                    \"completion\": {\n                        \"firm\": \"B\",\n                        \"side\": \"sell\",\n                        \"trader\": \"Doe\"\n                    },\n                    \"trade_time\": \"2012-01-01T12:00:00Z\"\n                }]\n            }\n\n+ Response 404 (application/json)\n\n        {\n            \"error\": {\n                \"status\": 404,\n                \"title\": \"Not Found\",\n                \"message\": \"Invalid futures id.\"\n            }\n        }\n\n# Group Market Data\n\n## Futures [/futures]\n\n+ Attributes (object)\n    + futures_id (string, required)\n    + futures_name: Gold (string)\n    + symbol: GC (string)\n    + period: MAY18 (string)\n\n\n### Get Futures [GET]\n\nGet a list of available futures for trading.\n\n+ Response 200 (application/json)\n\n    + Attributes (object)\n    \n        + data (array[Futures])\n            \n    + Body\n    \n            {\n                \"data\": [\n                    {\n                        \"futures_id\": \"GC_MAY18\",\n                        \"futures_name\": \"Gold\",\n                        \"symbol\": \"GC\",\n                        \"period\": \"MAY18\"\n                    }\n                ]\n            }\n\n## Order Book [/futures/{futures_id}/book{?level}]\n\n+ Attributes (array)\n\n    + 295.86 (number) - Price\n    + 10.34 (number) - Quantity\n\n+ Parameters\n\n    + futures_id (string) - The id of the futures.\n    + level (number, optional) - The level of the order book.\n        + default: 5\n\n### Get Order Book [GET]\n\nGet a list of open orders for futures.\n\n+ Response 200 (application/json)\n\n    + Attributes (object)\n    \n        + data (object)\n            + bids (array[Order Book])\n            + asks (array[Order Book])\n            + level: 5 (number)\n\n    + Body\n\n            {\n                \"data\": {\n                    \"bids\": [\n                        [ 295.96, 10.34 ],\n                        [ 295.95, 5.67 ],\n                        [ 295.93, 3.46 ],\n                        [ 295.92, 4.62 ],\n                        [ 295.90, 5.17 ]\n                    ],\n                    \"asks\": [\n                        [ 295.89, 2.41 ],\n                        [ 295.88, 3.45 ],\n                        [ 295.87, 1.56 ],\n                        [ 295.86, 7.23 ],\n                        [ 295.85, 3.41 ]\n                    ],\n                    \"level\": 5\n                }\n            }\n\n+ Response 404 (application/json)\n\n        {\n            \"error\": {\n                \"status\": 404,\n                \"title\": \"Not Found\",\n                \"message\": \"Invalid futures id.\"\n            }\n        }\n\n# Group Administrator"
    });

    if (false) {
        var changed = null;
        var xhrChanged = new XMLHttpRequest();
        var xhrData = new XMLHttpRequest();
        setInterval(function() {
            xhrChanged.open('GET', window.location.href + "/changed", true);
            xhrChanged.send();

            xhrChanged.onreadystatechange = function() {
                if (xhrChanged.readyState === 4 && xhrChanged.status === 200) {
                    if (!changed) {
                        changed = xhrChanged.responseText;
                    }
                    if (changed != xhrChanged.responseText) {
                        changed = xhrChanged.responseText;
                        xhrData.open('GET', window.location.href + "/source", true);
                        xhrData.send();

                        xhrData.onreadystatechange = function() {
                            if (xhrData.readyState === 4 && xhrData.status === 200) {
                                window[embed.adaptee.id].contentWindow.postMessage({"origin": "Apiary.Embed", "eventType": "anonymousPreview", "data": {"code": xhrData.responseText}}, '*');
                            }
                        }
                    }
                }
            }
        }, 1000);
    }
  </script>
</body>
</html>
